
```html
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tính Giá Bạt HDPE - Quang Phúc</title>
    <style>
        /* 1) Thương hiệu & Giao diện */
        :root {
            --color-primary: #16a34a; /* Xanh lá */
            --color-secondary: #f59e0b; /* Vàng cam */
            --color-bg-dark: #1f3d3d; /* Nền tối xanh rêu */
            --color-text-light: #f0fdf4;
            --color-bg-light: #ffffff;
            --color-card-bg: #2a5252;
            --color-input-bg: #376a6a;
            --color-border: #4a8080;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--color-bg-dark);
            color: var(--color-text-light);
            line-height: 1.6;
            margin: 0;
            padding: 20px 10px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: var(--color-card-bg);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        header {
            text-align: center;
            margin-bottom: 25px;
        }

        header h1 {
            color: var(--color-secondary);
            font-size: 1.8rem;
            margin-top: 10px;
        }

        .logo {
            max-width: 150px;
            height: auto;
            border-radius: 8px;
        }

        /* Form Styling */
        .form-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--color-primary);
        }

        input[type="number"],
        input[type="text"],
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            background-color: var(--color-input-bg);
            color: var(--color-text-light);
            box-sizing: border-box;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input[type="number"]:focus,
        input[type="text"]:focus,
        select:focus {
            border-color: var(--color-secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.5);
        }

        /* Nút */
        .actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }

        button {
            padding: 10px 15px;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s, opacity 0.3s;
        }

        #calculate-btn {
            background-color: var(--color-primary);
            color: var(--color-bg-light);
        }

        #calculate-btn:hover {
            background-color: #15803d;
        }

        #reset-btn {
            background-color: #6b7280;
            color: var(--color-bg-light);
        }

        #reset-btn:hover {
            background-color: #4b5563;
        }

        #send-quote-btn {
            background-color: var(--color-secondary);
            color: var(--color-bg-dark);
        }

        #send-quote-btn:hover {
            background-color: #d97706;
        }

        /* Tùy chọn nâng cao */
        details {
            border: 1px solid var(--color-border);
            border-radius: 6px;
            padding: 10px;
            margin-top: 20px;
            background-color: #2a5252;
        }

        summary {
            font-weight: bold;
            cursor: pointer;
            color: var(--color-secondary);
            padding: 5px 0;
            outline: none;
        }

        .advanced-options {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .advanced-options .form-group {
            flex: 1;
        }

        /* 5) Kết quả hiển thị */
        #results {
            margin-top: 30px;
            border-top: 2px dashed var(--color-primary);
            padding-top: 20px;
            display: none; /* Ẩn cho đến khi tính toán */
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background-color: #1f3d3d;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid var(--color-primary);
        }

        .stat-card .label {
            font-size: 0.9rem;
            color: var(--color-primary);
            margin-bottom: 5px;
        }

        .stat-card .value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--color-secondary);
        }

        .note {
            font-size: 0.85rem;
            color: #ccc;
            margin-top: 20px;
            text-align: center;
        }

        /* Bảng giá tham chiếu */
        .price-table-container {
            margin-top: 30px;
            overflow-x: auto;
        }

        .price-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
            font-size: 0.9rem;
        }

        .price-table th, .price-table td {
            border: 1px solid var(--color-border);
            padding: 10px 8px;
            text-align: center;
        }

        .price-table th {
            background-color: var(--color-primary);
            color: var(--color-bg-dark);
            font-weight: bold;
            position: sticky;
            top: 0;
        }

        .price-table td:first-child, .price-table td:nth-child(2) {
            text-align: left;
        }

        .price-table tbody tr:nth-child(even) {
            background-color: #214343;
        }

        .price-table tbody tr:hover {
            background-color: #376a6a;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }

            header h1 {
                font-size: 1.5rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .advanced-options {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <img src="Logo.jpg" alt="Logo Quang Phúc" class="logo">
            <h1>CÔNG CỤ ƯỚC TÍNH GIÁ BẠT HDPE</h1>
        </header>

        <section class="form-section">
            <div class="form-group">
                <label for="length">Chiều dài hồ (m)</label>
                <input type="number" id="length" value="20" min="0.1" step="0.01" required>
            </div>
            <div class="form-group">
                <label for="width">Chiều rộng hồ (m)</label>
                <input type="number" id="width" value="10" min="0.1" step="0.01" required>
            </div>
            <div class="form-group">
                <label for="depth">Độ sâu hồ (m)</label>
                <input type="number" id="depth" value="3" min="0.1" step="0.01" required>
            </div>
            <div class="form-group">
                <label for="thickness">Độ dày bạt (mm)</label>
                <select id="thickness">
                    <option value="0.2">0.2 mm</option>
                    <option value="0.3">0.3 mm</option>
                    <option value="0.4">0.4 mm</option>
                    <option value="0.5">0.5 mm</option>
                    <option value="0.75">0.75 mm</option>
                    <option value="1.0" selected>1.0 mm</option>
                    <option value="1.5">1.5 mm</option>
                    <option value="2.0">2.0 mm</option>
                </select>
            </div>
        </section>

        <details>
            <summary>Tùy chọn nâng cao (Mép chồng mí/neo biên & Hao hụt)</summary>
            <div class="advanced-options">
                <div class="form-group">
                    <label for="overlap">Mép chồng mí/neo biên (m)</label>
                    <input type="number" id="overlap" value="0.3" min="0" step="0.01">
                </div>
                <div class="form-group">
                    <label for="loss-rate">Hệ số hao hụt (%)</label>
                    <input type="number" id="loss-rate" value="5" min="0" step="0.01">
                </div>
            </div>
        </details>

        <section class="form-section" style="margin-top: 20px;">
            <div class="form-group">
                <label for="phone">Số điện thoại</label>
                <input type="text" id="phone" placeholder="0xxxxxxxxx hoặc +84xxxxxxxx" required>
            </div>
            <div class="form-group">
                <label for="address">Địa chỉ</label>
                <input type="text" id="address" placeholder="Địa chỉ giao hàng/lắp đặt" required>
            </div>
        </section>

        <div class="actions">
            <button id="calculate-btn">Tính giá</button>
            <button id="reset-btn">Nhập lại (Reset)</button>
            <button id="send-quote-btn">Gửi yêu cầu báo giá</button>
        </div>

        <div id="results">
            <h2>KẾT QUẢ ƯỚC TÍNH</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="label">Độ dày bạt / Bảo hành</div>
                    <div class="value" id="res-warranty">1.0 mm / 5 năm</div>
                </div>
                <div class="stat-card">
                    <div class="label">Diện tích phủ (m²)</div>
                    <div class="value" id="res-area">0</div>
                </div>
                <div class="stat-card">
                    <div class="label">Bậc giá áp dụng</div>
                    <div class="value" id="res-tier">Chưa xác định</div>
                </div>
                <div class="stat-card">
                    <div class="label">Đơn giá (đ/m²)</div>
                    <div class="value" id="res-unit-price">0</div>
                </div>
                <div class="stat-card">
                    <div class="label">Thành tiền (VNĐ)</div>
                    <div class="value" id="res-total-price">0</div>
                </div>
            </div>

            <p class="note">(*) Đây là ước tính tham khảo, giá thực tế có thể thay đổi theo thời điểm, địa điểm giao hàng, và dịch vụ thi công. Vui lòng **Gửi yêu cầu báo giá** để nhận báo giá chính xác.</p>
        </div>

        <div class="price-table-container">
            <h2>BẢNG GIÁ THAM CHIẾU (VNĐ/m²)</h2>
            <table class="price-table">
                <thead>
                    <tr>
                        <th>Độ dày</th>
                        <th>Bảo hành</th>
                        <th>&lt; 80 m²</th>
                        <th>&lt; 500 m²</th>
                        <th>&lt; 1.000 m²</th>
                        <th>&lt; 2.000 m²</th>
                        <th>&lt; 10.000 m²</th>
                    </tr>
                </thead>
                <tbody id="price-table-body">
                    </tbody>
            </table>
        </div>
    </div>

    <script>
        // 4) Bảng giá (đ/m²) & bảo hành
        const PRICE_DATA = [
            { code:"0.2",  label:"0.2 mm",  warranty:"2 năm",    m2PerKg:5.41, prices:[12500,10800, 9500, 9000, 8700] },
            { code:"0.3",  label:"0.3 mm",  warranty:"2 năm",    m2PerKg:3.58, prices:[18800,16300,14400,13500,15000] },
            { code:"0.4",  label:"0.4 mm",  warranty:"30 tháng", m2PerKg:2.69, prices:[24900,21600,19100,17900,19000] },
            { code:"0.5",  label:"0.5 mm",  warranty:"3 năm",    m2PerKg:2.15, prices:[29300,26900,23800,22400,22000] },
            { code:"0.75", label:"0.75 mm", warranty:"5 năm",    m2PerKg:1.43, prices:[44300,40300,33900,33500,32600] },
            { code:"1.0",  label:"1.0 mm",  warranty:"5 năm",    m2PerKg:1.06, prices:[62100,53820,47670,44700,43500] }, // Đã chỉnh giá 1.0mm
            { code:"1.5",  label:"1.5 mm",  warranty:"5 năm",    m2PerKg:0.71, prices:[93000,80600,71300,67000,65100] },
            { code:"2.0",  label:"2.0 mm",  warranty:"5 năm",    m2PerKg:1.25, prices:[124100,107500,95100,89300,86800] },
        ];

        // Mảng các bậc diện tích để xác định bậc giá
        const TIER_THRESHOLDS = [80, 500, 1000, 2000, 10000]; // Ngưỡng: <80, <500, <1000, <2000, <10000

        // 7) Định dạng tiền tệ
        const formatter = new Intl.NumberFormat('vi-VN', {
            style: 'currency',
            currency: 'VND',
            minimumFractionDigits: 0,
        });

        // Hàm định dạng số thông thường
        const numberFormatter = new Intl.NumberFormat('vi-VN', {
            maximumFractionDigits: 2
        });

        // Hàm kiểm tra hợp lệ SĐT
        function isValidPhoneNumber(phone) {
            if (!phone) return false;
            // Kiểm tra SĐT VN: bắt đầu +84 hoặc 0, có độ dài 9-11 chữ số (không tính +84)
            const phoneRegex = /^((\+84|0)[3|5|7|8|9|2|4|6]{1}\d{8,9})$/; // Ví dụ: +84912345678 hoặc 0912345678
            return phoneRegex.test(phone.replace(/\s/g, ''));
        }

        // 3) Công thức tính & Chọn bậc giá
        function calculatePrice() {
            // Lấy giá trị từ form
            const length = parseFloat(document.getElementById('length').value);
            const width = parseFloat(document.getElementById('width').value);
            const depth = parseFloat(document.getElementById('depth').value);
            const overlap = parseFloat(document.getElementById('overlap').value);
            const lossRate = parseFloat(document.getElementById('loss-rate').value);
            const thicknessCode = document.getElementById('thickness').value;

            // Kiểm tra dữ liệu bắt buộc
            if (isNaN(length) || isNaN(width) || isNaN(depth) || length <= 0.1 || width <= 0.1 || depth <= 0.1) {
                alert("Vui lòng nhập Chiều dài, Chiều rộng và Độ sâu hợp lệ (tối thiểu 0.1 m)!");
                document.getElementById('results').style.display = 'none';
                return null;
            }

            // Lấy dữ liệu giá theo độ dày
            const selectedPriceData = PRICE_DATA.find(data => data.code === thicknessCode);
            if (!selectedPriceData) {
                alert("Lỗi: Không tìm thấy dữ liệu giá cho độ dày này.");
                document.getElementById('results').style.display = 'none';
                return null;
            }

            // Tính Diện tích phủ phẳng (hồ chữ nhật)
            // Area = (Dài + 2* Sâu + 2* Mép) * (Rộng + 2* Sâu + 2* Mép)
            const L_phu = length + 2 * depth + 2 * overlap;
            const W_phu = width + 2 * depth + 2 * overlap;
            let area = L_phu * W_phu;

            // Cộng hao hụt
            area *= (1 + lossRate / 100);
            
            // Làm tròn diện tích về 2 số thập phân
            const finalArea = Math.round(area * 100) / 100;

            // Chọn bậc giá theo diện tích
            let priceTierIndex = -1;
            let tierLabel = '';

            for (let i = 0; i < TIER_THRESHOLDS.length; i++) {
                if (finalArea < TIER_THRESHOLDS[i]) {
                    priceTierIndex = i;
                    tierLabel = `< ${numberFormatter.format(TIER_THRESHOLDS[i])} m²`;
                    break;
                }
            }

            // Nếu vượt ngưỡng cao nhất, vẫn lấy giá bậc cao nhất (index cuối cùng)
            if (priceTierIndex === -1) {
                priceTierIndex = TIER_THRESHOLDS.length - 1;
                tierLabel = `≥ ${numberFormatter.format(TIER_THRESHOLDS[TIER_THRESHOLDS.length - 2])} m²`; // Sử dụng ngưỡng trước đó để thể hiện >=
            }

            const unitPrice = selectedPriceData.prices[priceTierIndex];
            const totalPrice = finalArea * unitPrice;

            // Hiển thị kết quả
            document.getElementById('res-warranty').textContent = `${selectedPriceData.label} / ${selectedPriceData.warranty}`;
            document.getElementById('res-area').textContent = `${numberFormatter.format(finalArea)} m²`;
            document.getElementById('res-tier').textContent = tierLabel;
            document.getElementById('res-unit-price').textContent = formatter.format(unitPrice);
            document.getElementById('res-total-price').textContent = formatter.format(totalPrice);
            document.getElementById('results').style.display = 'block';
            
            return {
                length, width, depth, overlap, lossRate,
                thicknessLabel: selectedPriceData.label,
                finalArea, tierLabel, unitPrice, totalPrice,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value
            };
        }

        // 7) Reset về giá trị mặc định
        function resetForm() {
            document.getElementById('length').value = '20';
            document.getElementById('width').value = '10';
            document.getElementById('depth').value = '3';
            document.getElementById('thickness').value = '1.0';
            document.getElementById('overlap').value = '0.3';
            document.getElementById('loss-rate').value = '5';
            document.getElementById('phone').value = '';
            document.getElementById('address').value = '';
            document.getElementById('results').style.display = 'none';
        }

        // 6) Hành động “Gửi yêu cầu báo giá”
        function sendQuoteRequest() {
            const calculationData = calculatePrice();

            if (!calculationData) {
                // Đã có alert trong calculatePrice
                return;
            }

            if (!calculationData.phone || !calculationData.address) {
                alert("Vui lòng nhập Số điện thoại và Địa chỉ để gửi yêu cầu báo giá!");
                return;
            }

            if (!isValidPhoneNumber(calculationData.phone)) {
                 alert("Số điện thoại không hợp lệ. Vui lòng nhập SĐT Việt Nam hợp lệ (0xxxxxxxxx hoặc +84xxxxxxxx).");
                return;
            }

            const bodyContent = `
YÊU CẦU BÁO GIÁ BẠT HDPE - QUANG PHÚC
---
THÔNG TIN KHÁCH HÀNG:
SĐT: ${calculationData.phone}
Địa chỉ: ${calculationData.address}

THÔNG SỐ TÍNH TOÁN:
- Kích thước hồ (D x R x S): ${numberFormatter.format(calculationData.length)}m x ${numberFormatter.format(calculationData.width)}m x ${numberFormatter.format(calculationData.depth)}m
- Mép neo biên: ${numberFormatter.format(calculationData.overlap)}m
- Hệ số hao hụt: ${numberFormatter.format(calculationData.lossRate)}%
- Độ dày bạt: ${calculationData.thicknessLabel}

KẾT QUẢ ƯỚC TÍNH:
- Diện tích phủ (có hao hụt): ${numberFormatter.format(calculationData.finalArea)} m²
- Bậc giá áp dụng: ${calculationData.tierLabel}
- Đơn giá: ${formatter.format(calculationData.unitPrice)}/m²
- Thành tiền ước tính: ${formatter.format(calculationData.totalPrice)}

Ghi chú khác: (Điền thêm yêu cầu của quý khách)
            `.trim();
            
            // Copy nội dung vào clipboard
            navigator.clipboard.writeText(bodyContent).then(() => {
                // Mở email
                const email = 'sales@quangphuc.vn';
                const subject = encodeURIComponent('Yêu cầu báo giá bạt HDPE');
                const body = encodeURIComponent(bodyContent);
                window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
            }).catch(err => {
                alert(`Không thể tự động copy nội dung báo giá. Vui lòng copy nội dung sau và dán vào email:
                
${bodyContent}`);
                // Vẫn mở email (không có nội dung body)
                const email = 'sales@quangphuc.vn';
                const subject = encodeURIComponent('Yêu cầu báo giá bạt HDPE');
                window.location.href = `mailto:${email}?subject=${subject}`;
            });
        }

        // 5) Bảng giá tham chiếu
        function renderPriceTable() {
            const tbody = document.getElementById('price-table-body');
            let html = '';

            PRICE_DATA.forEach(item => {
                html += `<tr>
                    <td>${item.label}</td>
                    <td>${item.warranty}</td>
                    ${item.prices.map(price => `<td>${formatter.format(price)}</td>`).join('')}
                </tr>`;
            });
            tbody.innerHTML = html;
        }

        // Khởi tạo và gắn sự kiện
        document.addEventListener('DOMContentLoaded', () => {
            renderPriceTable();

            document.getElementById('calculate-btn').addEventListener('click', calculatePrice);
            document.getElementById('reset-btn').addEventListener('click', resetForm);
            document.getElementById('send-quote-btn').addEventListener('click', sendQuoteRequest);

            // Gán giá trị mặc định cho lần đầu tiên tải trang
            resetForm();
        });
    </script>
</body>
</html>
```
