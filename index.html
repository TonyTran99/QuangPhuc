<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Máy tính giá bạt HDPE | Quang Phúc</title>
  <style>
    :root{
      --bg:#0b1220;          /* nền tối sang trọng */
      --card:#0f172a;        /* slate-900 */
      --ink:#e5e7eb;         /* text */
      --muted:#9aa4b2;       /* phụ */
      --brand:#22c55e;       /* xanh lá */
      --accent:#38bdf8;      /* xanh dương */
      --danger:#ef4444;
      --ring: 0 0 0 3px rgba(56,189,248,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background: radial-gradient(1200px 600px at 20% -10%,rgba(34,197,94,.15),transparent),
                  radial-gradient(1000px 500px at 120% 10%,rgba(56,189,248,.12),transparent),
                  var(--bg);
      color:var(--ink);
    }
    .wrap{max-width:1100px;margin:auto;padding:24px}
    header{display:flex;gap:18px;align-items:center;margin-bottom:22px}
    .logo{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,var(--brand),var(--accent));box-shadow:0 6px 30px rgba(34,197,94,.35)}
    h1{font-size:clamp(22px,3vw,30px);margin:0;letter-spacing:.2px}
    .subtitle{color:var(--muted);font-size:14px}

    .grid{display:grid;grid-template-columns: 1.1fr .9fr;gap:22px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    .card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));
          border:1px solid rgba(148,163,184,.2);border-radius:18px;padding:18px 18px 16px;box-shadow:0 12px 30px rgba(2,6,23,.45)}
    .card h2{font-size:18px;margin:2px 0 14px}
    .row{display:grid;grid-template-columns: 1fr 1fr;gap:12px}
    @media (max-width:720px){.row{grid-template-columns:1fr}}

    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input,select{width:100%;border:1px solid rgba(148,163,184,.25);background:#0b1327;color:var(--ink);
      padding:12px 12px;border-radius:12px;outline:none;transition:.15s}
    input:focus,select:focus{box-shadow:var(--ring);border-color:#38bdf8}

    .hint{font-size:12px;color:var(--muted);margin-top:4px}
    .actions{display:flex;gap:12px;align-items:center;margin-top:10px}
    .btn{border:0;cursor:pointer;border-radius:12px;padding:12px 14px;font-weight:600}
    .btn-primary{background:linear-gradient(135deg,var(--brand),#16a34a);color:#07130a}
    .btn-ghost{background:transparent;color:var(--ink);border:1px dashed rgba(148,163,184,.35)}

    .stats{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    @media (max-width:600px){.stats{grid-template-columns:1fr}}
    .stat{background:#0b1327;border:1px solid rgba(148,163,184,.25);border-radius:14px;padding:12px}
    .stat .k{color:var(--muted);font-size:12px}
    .stat .v{font-size:20px;font-weight:700;margin-top:4px}

    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{padding:10px;border-bottom:1px solid rgba(148,163,184,.18);text-align:left;font-size:14px}
    th{color:var(--muted);font-weight:600}
    .right{text-align:right}

    .note{font-size:12px;color:var(--muted);margin-top:10px}
    footer{margin-top:24px;font-size:12px;color:var(--muted);text-align:center}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1>Máy tính giá bạt HDPE – Quang Phúc</h1>
        <div class="subtitle">Nhập kích thước công trình và chọn độ dày bạt. Hệ thống tự động ước tính diện tích phủ & đơn giá theo bậc thang.</div>
      </div>
    </header>

    <div class="grid">
      <!-- INPUTS -->
      <section class="card" aria-labelledby="form-title">
        <h2 id="form-title">Thông số công trình</h2>
        <div class="row">
          <div>
            <label for="length">Chiều dài (m)</label>
            <input id="length" type="number" step="0.01" min="0.1" value="20" />
          </div>
          <div>
            <label for="width">Chiều rộng (m)</label>
            <input id="width" type="number" step="0.01" min="0.1" value="10" />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="depth">Độ sâu (m)</label>
            <input id="depth" type="number" step="0.01" min="0.1" value="3" />
            <div class="hint">Dùng cho hồ/ao/hầm dạng chữ nhật. Công thức phủ: (Dài + 2×Sâu) × (Rộng + 2×Sâu).</div>
          </div>
          <div>
            <label for="thickness">Độ dày bạt</label>
            <select id="thickness"></select>
            <div class="hint">Giá tự đổi theo diện tích. Bảo hành 2–5 năm tùy độ dày.</div>
          </div>
        </div>
        <details style="margin-top:10px">
          <summary style="cursor:pointer;color:var(--accent)">Tùy chọn nâng cao</summary>
          <div class="row" style="margin-top:10px">
            <div>
              <label for="overlap">Mép chồng mí/neo biên (m)</label>
              <input id="overlap" type="number" step="0.05" min="0" value="0.3" />
              <div class="hint">Cộng thêm mỗi cạnh để đủ chừa mép hàn/neo.</div>
            </div>
            <div>
              <label for="waste">Hệ số hao hụt (%)</label>
              <input id="waste" type="number" step="1" min="0" value="5" />
              <div class="hint">Dự phòng cắt ghép, địa hình gồ ghề.</div>
            </div>
          </div>
        </details>
        <div class="actions">
          <button class="btn btn-primary" id="calc">Tính giá</button>
          <button class="btn btn-ghost" id="reset">Nhập lại</button>
        </div>
      </section>

      <!-- OUTPUTS -->
      <section class="card" aria-labelledby="result-title">
        <h2 id="result-title">Kết quả ước tính</h2>
        <div class="stats">
          <div class="stat"><div class="k">Diện tích phủ (m²)</div><div class="v" id="area">—</div></div>
          <div class="stat"><div class="k">Bậc giá áp dụng</div><div class="v" id="tier">—</div></div>
          <div class="stat"><div class="k">Đơn giá (đ/m²)</div><div class="v" id="unitPrice">—</div></div>
          <div class="stat"><div class="k">Thành tiền (đ)</div><div class="v" id="total">—</div></div>
        </div>

        <table aria-label="Chi tiết giá">
          <thead>
            <tr>
              <th>Độ dày</th>
              <th>Bảo hành</th>
              <th class="right">&lt; 80 m²</th>
              <th class="right">&lt; 500 m²</th>
              <th class="right">&lt; 1.000 m²</th>
              <th class="right">&lt; 2.000 m²</th>
              <th class="right">&lt; 10.000 m²</th>
            </tr>
          </thead>
          <tbody id="priceTable"></tbody>
        </table>
        <div class="note">Lưu ý: Đây là ước tính tham khảo dựa trên bảng giá chuẩn. Báo giá thực tế có thể thay đổi theo địa hình, vận chuyển và thi công.</div>
      </section>
    </div>

    <footer>
      © 2025 Quang Phúc • Hotline: <a href="tel:0908387238" style="color:var(--ink);text-decoration:underline">0908 38 72 38</a>
    </footer>
  </div>

  <script>
    // ===== DỮ LIỆU GIÁ (đ/m²) & THUỘC TÍNH TỪ BẢNG BÁO GIÁ =====
    // Tier theo diện tích: [<80, <500, <1000, <2000, <10000]
    const PRICE_DATA = [
      { code:"0.2", label:"0.2 mm", warranty:"2 năm", m2PerKg:5.41, prices:[12500,10800,9500,9000,8700] },
      { code:"0.3", label:"0.3 mm", warranty:"2 năm", m2PerKg:3.58, prices:[18800,16300,14400,13500,15000] },
      { code:"0.4", label:"0.4 mm", warranty:"30 tháng", m2PerKg:2.69, prices:[24900,21600,19100,17900,19000] },
      { code:"0.5", label:"0.5 mm", warranty:"3 năm", m2PerKg:2.15, prices:[29300,26900,23800,22400,22000] },
      { code:"0.75", label:"0.75 mm", warranty:"5 năm", m2PerKg:1.43, prices:[44300,40300,33900,33500,32600] },
      { code:"1.0", label:"1.0 mm", warranty:"5 năm", m2PerKg:1.06, prices:[62100,53820,41670,44700,43500] },
      { code:"1.5", label:"1.5 mm", warranty:"5 năm", m2PerKg:0.71, prices:[93000,80600,71300,67000,65100] },
      { code:"2.0", label:"2.0 mm", warranty:"5 năm", m2PerKg:1.25, prices:[124100,107500,95100,89300,86800] },
    ];

    const TIER_LABELS = ["< 80 m²","< 500 m²","< 1.000 m²","< 2.000 m²","< 10.000 m²"];

    // ===== TIỆN ÍCH =====
    const VND = new Intl.NumberFormat('vi-VN');
    const $ = (q)=>document.querySelector(q);

    // Build dropdown & table
    const sel = $('#thickness');
    PRICE_DATA.forEach((d,i)=>{
      const o = document.createElement('option');
      o.value=i; o.textContent=`${d.label} — bảo hành ${d.warranty}`;
      sel.appendChild(o);
    });

    const tbody = $('#priceTable');
    function renderTable(){
      tbody.innerHTML = PRICE_DATA.map(d=>`
        <tr>
          <td>${d.label}</td>
          <td>${d.warranty}</td>
          ${d.prices.map(p=>`<td class="right">${VND.format(p)}</td>`).join('')}
        </tr>`).join('');
    }
    renderTable();

    function pickTier(area){
      if(area < 80) return 0;
      if(area < 500) return 1;
      if(area < 1000) return 2;
      if(area < 2000) return 3;
      return 4; // < 10.000 m²
    }

    function calc(){
      const L = parseFloat($('#length').value)||0;
      const W = parseFloat($('#width').value)||0;
      const D = parseFloat($('#depth').value)||0;
      const O = Math.max(0, parseFloat($('#overlap').value)||0);
      const wastePct = Math.max(0, parseFloat($('#waste').value)||0);

      if(L<=0||W<=0||D<=0){
        alert('Vui lòng nhập đầy đủ kích thước dương (>0).');
        return;
      }

      // Diện tích phủ phẳng theo công thức triển khai tấm: (L + 2D + 2O) × (W + 2D + 2O)
      let area = (L + 2*D + 2*O) * (W + 2*D + 2*O);
      area *= (1 + wastePct/100); // cộng hao hụt

      const thick = PRICE_DATA[ parseInt($('#thickness').value,10) ];
      const tier = pickTier(area);
      const unit = thick.prices[tier];
      const total = area * unit;

      // Đổ ra UI
      $('#area').textContent = VND.format(area.toFixed(2));
      $('#tier').textContent = TIER_LABELS[tier];
      $('#unitPrice').textContent = VND.format(unit);
      $('#total').textContent = VND.format(Math.round(total));
    }

    $('#calc').addEventListener('click', calc);
    $('#reset').addEventListener('click', ()=>{
      ['length','width','depth','overlap','waste'].forEach(id=>$("#"+id).value = {length:20,width:10,depth:3,overlap:.3,waste:5}[id]);
      $('#thickness').value = 5; // 1.0mm phổ biến
      ['area','tier','unitPrice','total'].forEach(id=>$('#'+id).textContent='—');
    });

    // mặc định: 1.0mm
    $('#thickness').value = 5;
  </script>
</body>
</html>
